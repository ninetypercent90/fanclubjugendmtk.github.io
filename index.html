<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fanclub M√∂nchshoftreuen Bierz√§hler</title>
<style>
    body {
        background-image: url('https://i.imgur.com/1z6uQ2b.jpeg');
        background-size: cover;
        font-family: Arial, sans-serif;
        text-align: center;
        color: #fff;
        padding: 40px;
    }
    h1 {
        font-size: 42px;
        text-shadow: 2px 2px 6px #000;
    }
    #counter {
        font-size: 80px;
        font-weight: bold;
        margin: 20px 0;
        background: rgba(0,0,0,0.6);
        display: inline-block;
        padding: 20px 60px;
        border-radius: 10px;
        box-shadow: 0 0 10px #000;
    }
    button {
        font-size: 28px;
        margin: 10px;
        padding: 15px 35px;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        color: white;
        box-shadow: 0 5px 10px rgba(0,0,0,0.5);
    }
    #plusBtn { background: green; }
    #minusBtn { background: darkred; }
    #resetBtn { background: gray; }
    select {
        font-size: 20px;
        padding: 8px;
        border-radius: 8px;
        margin-top: 20px;
    }
    #weekly {
        margin-top: 30px;
        background: rgba(0,0,0,0.6);
        display: inline-block;
        padding: 20px;
        border-radius: 10px;
        text-align: left;
    }
</style>
</head>
<body>

<h1>üç∫ Fanclub M√∂nchshoftreuen üç∫</h1>

<!-- Gruppenauswahl -->
<label for="group">Gruppe w√§hlen:</label>
<select id="group" onchange="switchGroup()">
    <option>Heimspiel</option>
    <option>Ausw√§rts</option>
    <option>Stammtisch</option>
</select>

<div id="counter">0</div><br>
<button id="plusBtn" onclick="addBeer()">+1 Bier</button>
<button id="minusBtn" onclick="removeBeer()">-1 Bier</button>
<button id="resetBtn" onclick="resetBeer()">Reset</button>

<div id="weekly">
    <h3>Wochen√ºbersicht</h3>
    <ul id="weekList"></ul>
</div>

<script>
    const counterEl = document.getElementById("counter");
    const weekList = document.getElementById("weekList");
    const groupSelect = document.getElementById("group");

    // Daten aus localStorage laden
    let data = JSON.parse(localStorage.getItem("bierData")) || {
        Heimspiel: { count: 0, weeks: {} },
        Ausw√§rts: { count: 0, weeks: {} },
        Stammtisch: { count: 0, weeks: {} }
    };

    let currentGroup = groupSelect.value;

    // Woche bestimmen (ISO-Kalenderwoche)
    function getWeekNumber(d = new Date()) {
        d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
        const dayNum = d.getUTCDay() || 7;
        d.setUTCDate(d.getUTCDate() + 4 - dayNum);
        const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
        return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);
    }

    function updateDisplay() {
        counterEl.textContent = data[currentGroup].count;
        renderWeekList();
        localStorage.setItem("bierData", JSON.stringify(data));
    }

    function addBeer() {
        data[currentGroup].count++;
        const week = getWeekNumber();
        data[currentGroup].weeks[week] = (data[currentGroup].weeks[week] || 0) + 1;
        updateDisplay();
    }

    function removeBeer() {
        if (data[currentGroup].count > 0) {
            data[currentGroup].count--;
            const week = getWeekNumber();
            if (data[currentGroup].weeks[week] > 0)
                data[currentGroup].weeks[week]--;
            updateDisplay();
        }
    }

    function resetBeer() {
        if (confirm("Bist du sicher, dass du den Z√§hler f√ºr " + currentGroup + " zur√ºcksetzen willst?")) {
            data[currentGroup].count = 0;
            data[currentGroup].weeks = {};
            updateDisplay();
        }
    }

    function switchGroup() {
        currentGroup = groupSelect.value;
        updateDisplay();
    }

    function renderWeekList() {
        weekList.innerHTML = "";
        const weeks = data[currentGroup].weeks;
        const sortedWeeks = Object.keys(weeks).sort((a,b) => b - a);
        if (sortedWeeks.length === 0) {
            weekList.innerHTML = "<li>Keine Daten bisher üçª</li>";
            return;
        }
        sortedWeeks.forEach(w => {
            const li = document.createElement("li");
            li.textContent = "KW " + w + ": " + weeks[w] + " Bier";
            weekList.appendChild(li);
        });
    }

    updateDisplay();
</script>

</body>
</html>
